/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include "keycodes.h"

&caps_word {
    continue-list = <UNDERSCORE MINUS>;
};

/ {
    behaviors {
        hm: homerow_mods {
            compatible = "zmk,behavior-hold-tap";
            label = "HOMEROW_MODS";
            #binding-cells = <2>;
            tapping-term-ms = <150>;
            quick-tap-ms = <0>;
            flavor = "tap-preferred";
            bindings = <&kp>, <&kp>;
        };
    };
    
    conditional_layers {
        compatible = "zmk,conditional-layers";
        tri_layer {
            if-layers = <LOWER RAISE>;
            then-layer = <ADJUST>;
        };
    };
    
    keymap {
        compatible = "zmk,keymap";
        default_layer {
            bindings = <
//,-----------------------------------------------------.                    ,-----------------------------------------------------.
   XXXX     KC_Q     KC_W     KC_E     KC_R     KC_T                          KC_Y     KC_U     KC_I     KC_O     KC_P     KC_BSLH
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   CAPSWRD  GUI_A    ALT_S    CTRL_D   SHFT_F   KC_G                          KC_H     SHFT_J   CTRL_K   ALT_L    GUI_SEMI KC_SQT
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   XXXX     KC_Z     KC_X     KC_C     KC_V     KC_B                          KC_N     KC_M     KC_COMMA KC_DOT   KC_FSLH  XXXX
//|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                       KC_BSPC &mo LOWER KC_SPACE    KC_RET  &mo RAISE KC_ESC
//                                    `--------------------------'  `--------------------------'
            >;
        };
        
        lower_layer {
            bindings = <
//,-----------------------------------------------------.                    ,-----------------------------------------------------.
   XXXX     KC_N1    KC_N2    KC_N3    KC_N4    KC_N5                         KC_N6    KC_N7    KC_N8    KC_N9    KC_N0    XXXX
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   XXXX     XXXX     XXXX     XXXX     XXXX     XXXX                          KC_LEFT  KC_DOWN  KC_UP    KC_RIGHT XXXX     XXXX
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   XXXX     USB_BT   XXXX     XXXX     XXXX     XXXX                          XXXX     XXXX     XXXX     XXXX     XXXX     XXXX
//|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                       ____     ____     ____        ____     ____     ____
//                                    `--------------------------'  `--------------------------'
            >;
        };

        raise_layer {
            bindings = <
//,-----------------------------------------------------.                    ,-----------------------------------------------------.
   XXXX     KC_EXCL  KC_AT    KC_HASH  KC_DLLR  KC_PRCNT                      KC_CARET KC_AMPS  KC_STAR  KC_LPAR  KC_RPAR  XXXX
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   XXXX     XXXX     XXXX     XXXX     XXXX     XXXX                          KC_MINUS KC_EQUAL KC_LBKT  KC_RBKT  KC_BSLH  XXXX
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   XXXX     XXXX     XXXX     XXXX     XXXX     XXXX                          KC_UNDER KC_PLUS  KC_LBRC  KC_RBRC  KC_PIPE  XXXX
//|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                    	               ____     ____     KC_UNDER    ____     ____     ____
//                                    `--------------------------'  `--------------------------'
            >;
        };
        
        adjust_layer {
            bindings = <
//,-----------------------------------------------------.                    ,-----------------------------------------------------.
   XXXX     XXXX     XXXX     XXXX     XXXX     XXXX                          XXXX     XXXX     XXXX     XXXX     XXXX     XXXX
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   BT__CLR  BT_SEL5   BT_SEL4  BT_SEL3  BT_SEL2  BT_SEL1                      XXXX     XXXX     XXXX     XXXX     XXXX     XXXX
//|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
   XXXX     XXXX     XXXX     XXXX     XXXX     XXXX                          XXXX     XXXX     XXXX     XXXX     XXXX     XXXX
//|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                    	               ____     ____     ____        ____     ____     ____
//                                    `--------------------------'  `--------------------------'
            >;
        };

    };
};
